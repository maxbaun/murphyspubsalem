$.fn.eventCalendar=function(t){function e(t,e){return t.date.toLowerCase()>e.date.toLowerCase()?1:-1}function n(t,e,n){var i=$("<div class='eventsCalendar-slider'></div>"),o=$("<div class='eventsCalendar-monthWrap'></div>"),s=$("<div class='eventsCalendar-currentTitle'><a href='#' class='monthTitle'></a></div>"),r=$("<a href='#' class='arrow prev'><span>"+c.txt_prev+"</span></a><a href='#' class='arrow next'><span>"+c.txt_next+"</span></a>");if($eventsCalendarDaysList=$("<ul class='eventsCalendar-daysList'></ul>"),date=new Date,d.wrap.find(".eventsCalendar-slider").size()?d.wrap.find(".eventsCalendar-slider").append(o):(d.wrap.prepend(i),i.append(o)),d.wrap.find(".eventsCalendar-monthWrap.currentMonth").removeClass("currentMonth").addClass("oldMonth"),o.addClass("currentMonth").append(s,$eventsCalendarDaysList),"current"===t)day=date.getDate(),i.append(r);else{date=new Date(d.wrap.attr("data-current-year"),d.wrap.attr("data-current-month"),1,0,0,0),day=0,moveOfMonth=1,"prev"===t&&(moveOfMonth=-1),date.setMonth(date.getMonth()+moveOfMonth);var l=new Date;date.getMonth()===l.getMonth()&&(day=l.getDate())}var e=date.getFullYear(),u=(new Date).getFullYear(),n=date.getMonth(),f=n+1;"current"!=t&&a(c.eventsLimit,e,n,!1,t),d.wrap.attr("data-current-month",n).attr("data-current-year",e),s.find(".monthTitle").html(c.monthNames[n]+" "+e);var p=32-new Date(e,n,32).getDate(),h=[];if(c.showDayAsWeeks){if($eventsCalendarDaysList.addClass("showAsWeek"),c.showDayNameInCalendar){$eventsCalendarDaysList.addClass("showDayNames");var m=0;for(c.startWeekOnMonday&&(m=1);7>m;m++)h.push('<li class="eventsCalendar-day-header">'+c.dayNamesShort[m]+"</li>"),6===m&&c.startWeekOnMonday&&h.push('<li class="eventsCalendar-day-header">'+c.dayNamesShort[0]+"</li>")}dt=new Date(e,n,1);var v=dt.getDay();for(c.startWeekOnMonday&&(v=dt.getDay()-1),0>v&&(v=6),m=v;m>0;m--)h.push('<li class="eventsCalendar-day empty"></li>')}for(dayCount=1;p>=dayCount;dayCount++){var g="";day>0&&dayCount===day&&e===u&&(g="today"),h.push('<li id="dayList_'+dayCount+'" rel="'+dayCount+'" class="eventsCalendar-day '+g+'"><a href="#">'+dayCount+"</a></li>")}$eventsCalendarDaysList.append(h.join("")),i.css("height",o.height()+"px")}function i(t){var e=t.length,n=t.charAt(e-1),i;return i=2===e&&"1"===t.charAt(0)?"th":"1"===n?"st":"2"===n?"nd":"3"===n?"rd":"th",t+i}function a(t,e,n,i,a){var t=t||0,e=e||"",i=i||"";if($("#events").find(".slide-loader").show(),"undefined"!=typeof n)var n=n;else var n="";d.wrap.find(".eventsCalendar-loading").fadeIn(),c.jsonData?(c.cacheJson=!0,d.eventsJson=c.jsonData,o(d.eventsJson,t,e,n,i,a)):c.cacheJson&&a?o(d.eventsJson,t,e,n,i,a):$.getJSON(c.eventsjson+"?limit="+t+"&year="+e+"&month="+n+"&day="+i,function(s){d.eventsJson=s,o(d.eventsJson,t,e,n,i,a)}).error(function(){r("error getting json: ")}),i>""&&(d.wrap.find(".current").removeClass("current"),d.wrap.find("#dayList_"+i).addClass("current"))}function o(t,n,a,o,s,r){directionLeftMove="-="+d.directionLeftMove,eventContentHeight="auto",subtitle=d.wrap.find(".eventsCalendar-list-wrap .eventsCalendar-subtitle"),r?(subtitle.html(""!=s?c.txt_SpecificEvents_prev+c.monthNames[o]+" "+i(s)+" "+c.txt_SpecificEvents_after:c.txt_SpecificEvents_prev+c.monthNames[o]+" "+c.txt_SpecificEvents_after),"prev"===r?directionLeftMove="+="+d.directionLeftMove:("day"===r||"month"===r)&&(directionLeftMove="+=0",eventContentHeight=0)):(subtitle.html(c.txt_NextEvents),eventContentHeight="auto",directionLeftMove="-=0"),d.wrap.find(".eventsCalendar-list").animate({opacity:c.moveOpacity,left:directionLeftMove,height:eventContentHeight},c.moveSpeed,function(){d.wrap.find(".eventsCalendar-list").css({left:0,height:"auto"}).hide();var i=[];if(t=$(t).sort(e),t.length){var r="";c.showDescription||(r="hidden");var l="_self";c.openEventInNewWindow&&(l="_blank");var u=0;$.each(t,function(t,e){if("human"==c.jsonDateFormat)var f=e.date.split(" "),p=f[0].split("-"),h=f[1].split(":"),m=p[0],v=parseInt(p[1])-1,g=parseInt(p[2]),w=parseInt(v)+1,y=h[0],b=h[1],x=h[2],p=new Date(m,v,g,y,b,x);else var p=new Date(parseInt(e.date)),m=p.getFullYear(),v=p.getMonth(),g=p.getDate(),w=v+1,y=p.getHours(),b=p.getMinutes();if(parseInt(b)<=9&&(b="0"+parseInt(b)),(0===n||n>u)&&!(o!==!1&&o!=v||""!=s&&s!=g||""!=a&&a!=m))if(o===!1&&p<new Date);else{if(eventStringDate=w+"/"+g+"/"+m,e.url)var C='<a href="'+e.url+'" target="'+l+'" class="eventTitle">'+e.title+"</a>";else var C='<span class="eventTitle">'+e.title+"</span>";var S=y>12?y-12:y,T=y>12?"pm":"am";i.push('<li id="'+t+'" class="'+e.type+'"><time datetime="'+p+'"><em>'+eventStringDate+"</em><small>"+S+":"+b+" "+T+"</small></time>"+C+'<p class="eventDesc '+r+'">'+e.description+"</p></li>"),u++}m==d.wrap.attr("data-current-year")&&v==d.wrap.attr("data-current-month")&&d.wrap.find(".currentMonth .eventsCalendar-daysList #dayList_"+parseInt(g)).addClass("dayWithEvents")})}i.length||i.push('<li class="eventsCalendar-noEvents"><p>'+c.txt_noEvents+"</p></li>"),d.wrap.find(".eventsCalendar-loading").hide(),d.wrap.find(".eventsCalendar-list").html(i.join("")),d.wrap.find(".eventsCalendar-list").animate({opacity:1,height:"toggle"},c.moveSpeed)}),l(),$("#eventCalendar").animate({opacity:"1"},100),$("#events").find(".slide-loader").hide()}function s(){d.wrap.find(".arrow").click(function(t){if(t.preventDefault(),$(this).hasClass("next")){n("next");var e="-="+d.directionLeftMove}else{n("prev");var e="+="+d.directionLeftMove}d.wrap.find(".eventsCalendar-monthWrap.oldMonth").animate({opacity:c.moveOpacity,left:e},c.moveSpeed,function(){d.wrap.find(".eventsCalendar-monthWrap.oldMonth").remove()})})}function r(t){d.wrap.find(".eventsCalendar-list-wrap").html("<span class='eventsCalendar-loading error'>"+t+" "+c.eventsjson+"</span>")}function l(){d.directionLeftMove=d.wrap.width(),d.wrap.find(".eventsCalendar-monthWrap").width(d.wrap.width()+"px"),d.wrap.find(".eventsCalendar-list-wrap").width(d.wrap.width()+"px")}var c=$.extend({},$.fn.eventCalendar.defaults,t),d={wrap:"",directionLeftMove:"300",eventsJson:{}};this.each(function(){d.wrap=$(this),d.wrap.addClass("eventCalendar-wrap").append("<div class='eventsCalendar-list-wrap'><p class='eventsCalendar-subtitle'></p><span class='eventsCalendar-loading'>Loading...</span><div class='eventsCalendar-list-content'><ul class='eventsCalendar-list'></ul></div></div>"),c.eventsScrollable&&d.wrap.find(".eventsCalendar-list-content").addClass("scrollable"),l(),$(window).resize(function(){l()}),n("current"),a(c.eventsLimit,!1,!1,!1,!1),s(),d.wrap.on("click",".eventsCalendar-day a",function(t){t.preventDefault();var e=d.wrap.attr("data-current-year"),n=d.wrap.attr("data-current-month"),i=$(this).parent().attr("rel");a(!1,e,n,i,"day")}),d.wrap.on("click",".monthTitle",function(t){t.preventDefault();var e=d.wrap.attr("data-current-year"),n=d.wrap.attr("data-current-month");a(c.eventsLimit,e,n,!1,"month")})})},$.fn.eventCalendar.defaults={eventsLimit:4,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],txt_noEvents:"There are no events in this period",txt_SpecificEvents_prev:"",txt_SpecificEvents_after:"events:",txt_next:"next",txt_prev:"prev",txt_NextEvents:"Next events:",txt_GoToEventUrl:"See the event",showDayAsWeeks:!0,startWeekOnMonday:!0,showDayNameInCalendar:!0,showDescription:!1,onlyOneDescription:!0,openEventInNewWindow:!0,eventsScrollable:!1,jsonDateFormat:"timestamp",moveSpeed:500,moveOpacity:.15,jsonData:"",cacheJson:!0},!function(t){t(function(){t.support.transition=function(){var t=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in e)if(void 0!==t.style[n])return e[n]}();return t&&{end:t}}()})}(window.jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,i,a){return jQuery.easing[jQuery.easing.def](t,e,n,i,a)},easeInQuad:function(t,e,n,i,a){return i*(e/=a)*e+n},easeOutQuad:function(t,e,n,i,a){return-i*(e/=a)*(e-2)+n},easeInOutQuad:function(t,e,n,i,a){return(e/=a/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,a){return i*(e/=a)*e*e+n},easeOutCubic:function(t,e,n,i,a){return i*((e=e/a-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,a){return(e/=a/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,a){return i*(e/=a)*e*e*e+n},easeOutQuart:function(t,e,n,i,a){return-i*((e=e/a-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,a){return(e/=a/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,a){return i*(e/=a)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,a){return i*((e=e/a-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,a){return(e/=a/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,a){return-i*Math.cos(e/a*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,a){return i*Math.sin(e/a*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,a){return-i/2*(Math.cos(Math.PI*e/a)-1)+n},easeInExpo:function(t,e,n,i,a){return 0==e?n:i*Math.pow(2,10*(e/a-1))+n},easeOutExpo:function(t,e,n,i,a){return e==a?n+i:i*(-Math.pow(2,-10*e/a)+1)+n},easeInOutExpo:function(t,e,n,i,a){return 0==e?n:e==a?n+i:(e/=a/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(t,e,n,i,a){return-i*(Math.sqrt(1-(e/=a)*e)-1)+n},easeOutCirc:function(t,e,n,i,a){return i*Math.sqrt(1-(e=e/a-1)*e)+n},easeInOutCirc:function(t,e,n,i,a){return(e/=a/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,a){var o=1.70158,s=0,r=i;if(0==e)return n;if(1==(e/=a))return n+i;if(s||(s=.3*a),r<Math.abs(i)){r=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*a-o)*Math.PI/s))+n},easeOutElastic:function(t,e,n,i,a){var o=1.70158,s=0,r=i;if(0==e)return n;if(1==(e/=a))return n+i;if(s||(s=.3*a),r<Math.abs(i)){r=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/r);return r*Math.pow(2,-10*e)*Math.sin(2*(e*a-o)*Math.PI/s)+i+n},easeInOutElastic:function(t,e,n,i,a){var o=1.70158,s=0,r=i;if(0==e)return n;if(2==(e/=a/2))return n+i;if(s||(s=.3*a*1.5),r<Math.abs(i)){r=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/r);return 1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*a-o)*Math.PI/s)+n:r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*a-o)*Math.PI/s)*.5+i+n},easeInBack:function(t,e,n,i,a,o){return void 0==o&&(o=1.70158),i*(e/=a)*e*((o+1)*e-o)+n},easeOutBack:function(t,e,n,i,a,o){return void 0==o&&(o=1.70158),i*((e=e/a-1)*e*((o+1)*e+o)+1)+n},easeInOutBack:function(t,e,n,i,a,o){return void 0==o&&(o=1.70158),(e/=a/2)<1?i/2*e*e*(((o*=1.525)+1)*e-o)+n:i/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+n},easeInBounce:function(t,e,n,i,a){return i-jQuery.easing.easeOutBounce(t,a-e,0,i,a)+n},easeOutBounce:function(t,e,n,i,a){return(e/=a)<1/2.75?7.5625*i*e*e+n:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,a){return a/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,i,a)+n:.5*jQuery.easing.easeOutBounce(t,2*e-a,0,i,a)+.5*i+n}}),function(t,e,n){function i(n,i,a){var o=e.createElement(n);return i&&(o.id=Z+i),a&&(o.style.cssText=a),t(o)}function a(){return n.innerHeight?n.innerHeight:t(n).height()}function o(t){var e=T.length,n=(q+t)%e;return 0>n?e+n:n}function s(t,e){return Math.round((/%/.test(t)?("x"===e?$.width():a())/100:1)*parseInt(t,10))}function r(t,e){return t.photo||t.photoRegex.test(e)}function l(t,e){return t.retinaUrl&&n.devicePixelRatio>1?e.replace(t.photoRegex,t.retinaSuffix):e}function c(t){"contains"in g[0]&&!g[0].contains(t.target)&&(t.stopPropagation(),g.focus())}function d(){var e,n=t.data(j,U);null==n?(D=t.extend({},X),console&&console.log&&console.log("Error: cboxElement missing settings object")):D=t.extend({},n);for(e in D)t.isFunction(D[e])&&"on"!==e.slice(0,2)&&(D[e]=D[e].call(j));D.rel=D.rel||j.rel||t(j).data("rel")||"nofollow",D.href=D.href||t(j).attr("href"),D.title=D.title||j.title,"string"==typeof D.href&&(D.href=t.trim(D.href))}function u(n,i){t(e).trigger(n),re.trigger(n),t.isFunction(i)&&i.call(j)}function f(n){K||(j=n,d(),T=t(j),q=0,"nofollow"!==D.rel&&(T=t("."+te).filter(function(){var e,n=t.data(this,U);return n&&(e=t(this).data("rel")||n.rel||this.rel),e===D.rel}),q=T.index(j),-1===q&&(T=T.add(j),q=T.length-1)),v.css({opacity:parseFloat(D.opacity),cursor:D.overlayClose?"pointer":"auto",visibility:"visible"}).show(),Y&&g.add(v).removeClass(Y),D.className&&g.add(v).addClass(D.className),Y=D.className,D.closeButton?_.html(D.close).appendTo(y):_.appendTo("<div/>"),Q||(Q=R=!0,g.css({visibility:"hidden",display:"block"}),O=i(le,"LoadedContent","width:0; height:0; overflow:hidden"),y.css({width:"",height:""}).append(O),A=b.height()+S.height()+y.outerHeight(!0)-y.height(),z=x.width()+C.width()+y.outerWidth(!0)-y.width(),H=O.outerHeight(!0),F=O.outerWidth(!0),D.w=s(D.initialWidth,"x"),D.h=s(D.initialHeight,"y"),O.css({width:"",height:D.h}),V.position(),u(ee,D.onOpen),W.add(k).hide(),g.focus(),D.trapFocus&&e.addEventListener&&(e.addEventListener("focus",c,!0),re.one(oe,function(){e.removeEventListener("focus",c,!0)})),D.returnFocus&&re.one(oe,function(){t(j).focus()})),m())}function p(){!g&&e.body&&(G=!1,$=t(n),g=i(le).attr({id:U,"class":t.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=i(le,"Overlay").hide(),M=t([i(le,"LoadingOverlay")[0],i(le,"LoadingGraphic")[0]]),w=i(le,"Wrapper"),y=i(le,"Content").append(k=i(le,"Title"),P=i(le,"Current"),E=t('<button type="button"/>').attr({id:Z+"Previous"}),N=t('<button type="button"/>').attr({id:Z+"Next"}),I=i("button","Slideshow"),M),_=t('<button type="button"/>').attr({id:Z+"Close"}),w.append(i(le).append(i(le,"TopLeft"),b=i(le,"TopCenter"),i(le,"TopRight")),i(le,!1,"clear:left").append(x=i(le,"MiddleLeft"),y,C=i(le,"MiddleRight")),i(le,!1,"clear:left").append(i(le,"BottomLeft"),S=i(le,"BottomCenter"),i(le,"BottomRight"))).find("div div").css({"float":"left"}),L=i(le,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),W=N.add(E).add(P).add(I),t(e.body).append(v,g.append(w,L)))}function h(){function n(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),f(this))}return g?(G||(G=!0,N.click(function(){V.next()}),E.click(function(){V.prev()}),_.click(function(){V.close()}),v.click(function(){D.overlayClose&&V.close()}),t(e).bind("keydown."+Z,function(t){var e=t.keyCode;Q&&D.escKey&&27===e&&(t.preventDefault(),V.close()),Q&&D.arrowKey&&T[1]&&!t.altKey&&(37===e?(t.preventDefault(),E.click()):39===e&&(t.preventDefault(),N.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+Z,"."+te,n):t("."+te).live("click."+Z,n)),!0):!1}function m(){var a,o,c,f=V.prep,p=++ce;R=!0,B=!1,j=T[q],d(),u(se),u(ne,D.onLoad),D.h=D.height?s(D.height,"y")-H-A:D.innerHeight&&s(D.innerHeight,"y"),D.w=D.width?s(D.width,"x")-F-z:D.innerWidth&&s(D.innerWidth,"x"),D.mw=D.w,D.mh=D.h,D.maxWidth&&(D.mw=s(D.maxWidth,"x")-F-z,D.mw=D.w&&D.w<D.mw?D.w:D.mw),D.maxHeight&&(D.mh=s(D.maxHeight,"y")-H-A,D.mh=D.h&&D.h<D.mh?D.h:D.mh),a=D.href,J=setTimeout(function(){M.show()},100),D.inline?(c=i(le).hide().insertBefore(t(a)[0]),re.one(se,function(){c.replaceWith(O.children())}),f(t(a))):D.iframe?f(" "):D.html?f(D.html):r(D,a)?(a=l(D,a),B=e.createElement("img"),t(B).addClass(Z+"Photo").bind("error",function(){D.title=!1,f(i(le,"Error").html(D.imgError))}).one("load",function(){var e;p===ce&&(B.alt=t(j).attr("alt")||t(j).attr("data-alt")||"",D.retinaImage&&n.devicePixelRatio>1&&(B.height=B.height/n.devicePixelRatio,B.width=B.width/n.devicePixelRatio),D.scalePhotos&&(o=function(){B.height-=B.height*e,B.width-=B.width*e},D.mw&&B.width>D.mw&&(e=(B.width-D.mw)/B.width,o()),D.mh&&B.height>D.mh&&(e=(B.height-D.mh)/B.height,o())),D.h&&(B.style.marginTop=Math.max(D.mh-B.height,0)/2+"px"),T[1]&&(D.loop||T[q+1])&&(B.style.cursor="pointer",B.onclick=function(){V.next()}),B.style.width=B.width+"px",B.style.height=B.height+"px",setTimeout(function(){f(B)},1))}),setTimeout(function(){B.src=a},1)):a&&L.load(a,D.data,function(e,n){p===ce&&f("error"===n?i(le,"Error").html(D.xhrError):t(this).contents())})}var v,g,w,y,b,x,C,S,T,$,O,L,M,k,P,I,N,E,_,W,D,A,z,H,F,j,q,B,Q,R,K,J,V,Y,G,X={transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,trapFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0},U="colorbox",Z="cbox",te=Z+"Element",ee=Z+"_open",ne=Z+"_load",ie=Z+"_complete",ae=Z+"_cleanup",oe=Z+"_closed",se=Z+"_purge",re=t("<a/>"),le="div",ce=0,de={},ue=function(){function t(){clearTimeout(s)}function e(){(D.loop||T[q+1])&&(t(),s=setTimeout(V.next,D.slideshowSpeed))}function n(){I.html(D.slideshowStop).unbind(l).one(l,i),re.bind(ie,e).bind(ne,t),g.removeClass(r+"off").addClass(r+"on")}function i(){t(),re.unbind(ie,e).unbind(ne,t),I.html(D.slideshowStart).unbind(l).one(l,function(){V.next(),n()}),g.removeClass(r+"on").addClass(r+"off")}function a(){o=!1,I.hide(),t(),re.unbind(ie,e).unbind(ne,t),g.removeClass(r+"off "+r+"on")}var o,s,r=Z+"Slideshow_",l="click."+Z;return function(){o?D.slideshow||(re.unbind(ae,a),a()):D.slideshow&&T[1]&&(o=!0,re.one(ae,a),D.slideshowAuto?n():i(),I.show())}}();t.colorbox||(t(p),V=t.fn[U]=t[U]=function(e,n){var i=this;if(e=e||{},p(),h()){if(t.isFunction(i))i=t("<a/>"),e.open=!0;else if(!i[0])return i;n&&(e.onComplete=n),i.each(function(){t.data(this,U,t.extend({},t.data(this,U)||X,e))}).addClass(te),(t.isFunction(e.open)&&e.open.call(i)||e.open)&&f(i[0])}return i},V.position=function(e,n){function i(){b[0].style.width=S[0].style.width=y[0].style.width=parseInt(g[0].style.width,10)-z+"px",y[0].style.height=x[0].style.height=C[0].style.height=parseInt(g[0].style.height,10)-A+"px"}var o,r,l,c=0,d=0,u=g.offset();if($.unbind("resize."+Z),g.css({top:-9e4,left:-9e4}),r=$.scrollTop(),l=$.scrollLeft(),D.fixed?(u.top-=r,u.left-=l,g.css({position:"fixed"})):(c=r,d=l,g.css({position:"absolute"})),d+=D.right!==!1?Math.max($.width()-D.w-F-z-s(D.right,"x"),0):D.left!==!1?s(D.left,"x"):Math.round(Math.max($.width()-D.w-F-z,0)/2),c+=D.bottom!==!1?Math.max(a()-D.h-H-A-s(D.bottom,"y"),0):D.top!==!1?s(D.top,"y"):Math.round(Math.max(a()-D.h-H-A,0)/2),g.css({top:u.top,left:u.left,visibility:"visible"}),w[0].style.width=w[0].style.height="9999px",o={width:D.w+F+z,height:D.h+H+A,top:c,left:d},e){var f=0;t.each(o,function(t){return o[t]!==de[t]?void(f=e):void 0}),e=f}de=o,e||g.css(o),g.dequeue().animate(o,{duration:e||0,complete:function(){i(),R=!1,w[0].style.width=D.w+F+z+"px",w[0].style.height=D.h+H+A+"px",D.reposition&&setTimeout(function(){$.bind("resize."+Z,V.position)},1),n&&n()},step:i})},V.resize=function(t){var e;Q&&(t=t||{},t.width&&(D.w=s(t.width,"x")-F-z),t.innerWidth&&(D.w=s(t.innerWidth,"x")),O.css({width:D.w}),t.height&&(D.h=s(t.height,"y")-H-A),t.innerHeight&&(D.h=s(t.innerHeight,"y")),t.innerHeight||t.height||(e=O.scrollTop(),O.css({height:"auto"}),D.h=O.height()),O.css({height:D.h}),e&&O.scrollTop(e),V.position("none"===D.transition?0:D.speed))},V.prep=function(n){function a(){return D.w=D.w||O.width(),D.w=D.mw&&D.mw<D.w?D.mw:D.w,D.w}function s(){return D.h=D.h||O.height(),D.h=D.mh&&D.mh<D.h?D.mh:D.h,D.h}if(Q){var c,d="none"===D.transition?0:D.speed;O.empty().remove(),O=i(le,"LoadedContent").append(n),O.hide().appendTo(L.show()).css({width:a(),overflow:D.scrolling?"auto":"hidden"}).css({height:s()}).prependTo(y),L.hide(),t(B).css({"float":"none"}),c=function(){function n(){t.support.opacity===!1&&g[0].style.removeAttribute("filter")}var a,s,c=T.length,f="frameBorder",p="allowTransparency";Q&&(s=function(){clearTimeout(J),M.hide(),u(ie,D.onComplete)},k.html(D.title).add(O).show(),c>1?("string"==typeof D.current&&P.html(D.current.replace("{current}",q+1).replace("{total}",c)).show(),N[D.loop||c-1>q?"show":"hide"]().html(D.next),E[D.loop||q?"show":"hide"]().html(D.previous),ue(),D.preloading&&t.each([o(-1),o(1)],function(){var n,i,a=T[this],o=t.data(a,U);o&&o.href?(n=o.href,t.isFunction(n)&&(n=n.call(a))):n=t(a).attr("href"),n&&r(o,n)&&(n=l(o,n),i=e.createElement("img"),i.src=n)})):W.hide(),D.iframe?(a=i("iframe")[0],f in a&&(a[f]=0),p in a&&(a[p]="true"),D.scrolling||(a.scrolling="no"),t(a).attr({src:D.href,name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",s).appendTo(O),re.one(se,function(){a.src="//about:blank"}),D.fastIframe&&t(a).trigger("load")):s(),"fade"===D.transition?g.fadeTo(d,1,n):n())},"fade"===D.transition?g.fadeTo(d,0,function(){V.position(0,c)}):V.position(d,c)}},V.next=function(){!R&&T[1]&&(D.loop||T[q+1])&&(q=o(1),f(T[q]))},V.prev=function(){!R&&T[1]&&(D.loop||q)&&(q=o(-1),f(T[q]))},V.close=function(){Q&&!K&&(K=!0,Q=!1,u(ae,D.onCleanup),$.unbind("."+Z),v.fadeTo(D.fadeOut||0,0),g.stop().fadeTo(D.fadeOut||0,0,function(){g.add(v).css({opacity:1,cursor:"auto"}).hide(),u(se),O.empty().remove(),setTimeout(function(){K=!1,u(oe,D.onClosed)},1)}))},V.remove=function(){g&&(g.stop(),t.colorbox.close(),g.stop().remove(),v.remove(),K=!1,g=null,t("."+te).removeData(U).removeClass(te),t(e).unbind("click."+Z))},V.element=function(){return t(j)},V.settings=X)}(jQuery,document,window),function(t){t.flexslider=function(e,n){var i=t(e),a=t.extend({},t.flexslider.defaults,n),o=a.namespace,s="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,r=s?"touchend":"click",l="vertical"===a.direction,c=a.reverse,d=0<a.itemWidth,u="fade"===a.animation,f=""!==a.asNavFor,p={};t.data(e,"flexslider",i),p={init:function(){i.animating=!1,i.currentSlide=a.startAt,i.animatingTo=i.currentSlide,i.atEnd=0===i.currentSlide||i.currentSlide===i.last,i.containerSelector=a.selector.substr(0,a.selector.search(" ")),i.slides=t(a.selector,i),i.container=t(i.containerSelector,i),i.count=i.slides.length,i.syncExists=0<t(a.sync).length,"slide"===a.animation&&(a.animation="swing"),i.prop=l?"top":"marginLeft",i.args={},i.manualPause=!1;var e=i,n;if((n=!a.video)&&(n=!u)&&(n=a.useCSS))t:{n=document.createElement("div");var o=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"],r;for(r in o)if(void 0!==n.style[o[r]]){i.pfx=o[r].replace("Perspective","").toLowerCase(),i.prop="-"+i.pfx+"-transform",n=!0;break t}n=!1}e.transitions=n,""!==a.controlsContainer&&(i.controlsContainer=0<t(a.controlsContainer).length&&t(a.controlsContainer)),""!==a.manualControls&&(i.manualControls=0<t(a.manualControls).length&&t(a.manualControls)),a.randomize&&(i.slides.sort(function(){return Math.round(Math.random())-.5}),i.container.empty().append(i.slides)),i.doMath(),f&&p.asNav.setup(),i.setup("init"),a.controlNav&&p.controlNav.setup(),a.directionNav&&p.directionNav.setup(),a.keyboard&&(1===t(i.containerSelector).length||a.multipleKeyboard)&&t(document).bind("keyup",function(t){t=t.keyCode,i.animating||39!==t&&37!==t||(t=39===t?i.getTarget("next"):37===t?i.getTarget("prev"):!1,i.flexAnimate(t,a.pauseOnAction))}),a.mousewheel&&i.bind("mousewheel",function(t,e){t.preventDefault();var n=i.getTarget(0>e?"next":"prev");i.flexAnimate(n,a.pauseOnAction)}),a.pausePlay&&p.pausePlay.setup(),a.slideshow&&(a.pauseOnHover&&i.hover(function(){!i.manualPlay&&!i.manualPause&&i.pause()},function(){!i.manualPause&&!i.manualPlay&&i.play()}),0<a.initDelay?setTimeout(i.play,a.initDelay):i.play()),s&&a.touch&&p.touch(),(!u||u&&a.smoothHeight)&&t(window).bind("resize focus",p.resize),setTimeout(function(){a.start(i)},200)},asNav:{setup:function(){i.asNav=!0,i.animatingTo=Math.floor(i.currentSlide/i.move),i.currentItem=i.currentSlide,i.slides.removeClass(o+"active-slide").eq(i.currentItem).addClass(o+"active-slide"),i.slides.click(function(e){e.preventDefault(),e=t(this);var n=e.index();!t(a.asNavFor).data("flexslider").animating&&!e.hasClass("active")&&(i.direction=i.currentItem<n?"next":"prev",i.flexAnimate(n,a.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){i.manualControls?p.controlNav.setupManual():p.controlNav.setupPaging()},setupPaging:function(){var e=1,n;if(i.controlNavScaffold=t('<ol class="'+o+"control-nav "+o+("thumbnails"===a.controlNav?"control-thumbs":"control-paging")+'"></ol>'),1<i.pagingCount)for(var l=0;l<i.pagingCount;l++)n="thumbnails"===a.controlNav?'<img src="'+i.slides.eq(l).attr("data-thumb")+'"/>':"<a>"+e+"</a>",i.controlNavScaffold.append("<li>"+n+"</li>"),e++;i.controlsContainer?t(i.controlsContainer).append(i.controlNavScaffold):i.append(i.controlNavScaffold),p.controlNav.set(),p.controlNav.active(),i.controlNavScaffold.delegate("a, img",r,function(e){e.preventDefault(),e=t(this);var n=i.controlNav.index(e);e.hasClass(o+"active")||(i.direction=n>i.currentSlide?"next":"prev",i.flexAnimate(n,a.pauseOnAction))}),s&&i.controlNavScaffold.delegate("a","click touchstart",function(t){t.preventDefault()})},setupManual:function(){i.controlNav=i.manualControls,p.controlNav.active(),i.controlNav.live(r,function(e){e.preventDefault(),e=t(this);var n=i.controlNav.index(e);e.hasClass(o+"active")||(i.direction=n>i.currentSlide?"next":"prev",i.flexAnimate(n,a.pauseOnAction))}),s&&i.controlNav.live("click touchstart",function(t){t.preventDefault()})},set:function(){i.controlNav=t("."+o+"control-nav li "+("thumbnails"===a.controlNav?"img":"a"),i.controlsContainer?i.controlsContainer:i)},active:function(){i.controlNav.removeClass(o+"active").eq(i.animatingTo).addClass(o+"active")},update:function(e,n){1<i.pagingCount&&"add"===e?i.controlNavScaffold.append(t("<li><a>"+i.count+"</a></li>")):1===i.pagingCount?i.controlNavScaffold.find("li").remove():i.controlNav.eq(n).closest("li").remove(),p.controlNav.set(),1<i.pagingCount&&i.pagingCount!==i.controlNav.length?i.update(n,e):p.controlNav.active()}},directionNav:{setup:function(){var e=t('<ul class="'+o+'direction-nav"><li><a class="'+o+'prev" href="#">'+a.prevText+'</a></li><li><a class="'+o+'next" href="#">'+a.nextText+"</a></li></ul>");i.controlsContainer?(t(i.controlsContainer).append(e),i.directionNav=t("."+o+"direction-nav li a",i.controlsContainer)):(i.append(e),i.directionNav=t("."+o+"direction-nav li a",i)),p.directionNav.update(),i.directionNav.bind(r,function(e){e.preventDefault(),e=i.getTarget(t(this).hasClass(o+"next")?"next":"prev"),i.flexAnimate(e,a.pauseOnAction)}),s&&i.directionNav.bind("click touchstart",function(t){t.preventDefault()})},update:function(){var t=o+"disabled";1===i.pagingCount?i.directionNav.addClass(t):a.animationLoop?i.directionNav.removeClass(t):0===i.animatingTo?i.directionNav.removeClass(t).filter("."+o+"prev").addClass(t):i.animatingTo===i.last?i.directionNav.removeClass(t).filter("."+o+"next").addClass(t):i.directionNav.removeClass(t)}},pausePlay:{setup:function(){var e=t('<div class="'+o+'pauseplay"><a></a></div>');i.controlsContainer?(i.controlsContainer.append(e),i.pausePlay=t("."+o+"pauseplay a",i.controlsContainer)):(i.append(e),i.pausePlay=t("."+o+"pauseplay a",i)),p.pausePlay.update(a.slideshow?o+"pause":o+"play"),i.pausePlay.bind(r,function(e){e.preventDefault(),t(this).hasClass(o+"pause")?(i.manualPause=!0,i.manualPlay=!1,i.pause()):(i.manualPause=!1,i.manualPlay=!0,i.play())}),s&&i.pausePlay.bind("click touchstart",function(t){t.preventDefault()})},update:function(t){"play"===t?i.pausePlay.removeClass(o+"pause").addClass(o+"play").text(a.playText):i.pausePlay.removeClass(o+"play").addClass(o+"pause").text(a.pauseText)}},touch:function(){function t(t){p=l?o-t.touches[0].pageY:o-t.touches[0].pageX,m=l?Math.abs(p)<Math.abs(t.touches[0].pageX-s):Math.abs(p)<Math.abs(t.touches[0].pageY-s),(!m||500<Number(new Date)-h)&&(t.preventDefault(),!u&&i.transitions&&(a.animationLoop||(p/=0===i.currentSlide&&0>p||i.currentSlide===i.last&&p>0?Math.abs(p)/f+2:1),i.setProps(r+p,"setTouch")))}function n(){if(e.removeEventListener("touchmove",t,!1),i.animatingTo===i.currentSlide&&!m&&null!==p){var l=c?-p:p,d=i.getTarget(l>0?"next":"prev");i.canAdvance(d)&&(550>Number(new Date)-h&&50<Math.abs(l)||Math.abs(l)>f/2)?i.flexAnimate(d,a.pauseOnAction):u||i.flexAnimate(i.currentSlide,a.pauseOnAction,!0)}e.removeEventListener("touchend",n,!1),r=p=s=o=null}var o,s,r,f,p,h,m=!1;e.addEventListener("touchstart",function(u){i.animating?u.preventDefault():1===u.touches.length&&(i.pause(),f=l?i.h:i.w,h=Number(new Date),r=d&&c&&i.animatingTo===i.last?0:d&&c?i.limit-(i.itemW+a.itemMargin)*i.move*i.animatingTo:d&&i.currentSlide===i.last?i.limit:d?(i.itemW+a.itemMargin)*i.move*i.currentSlide:c?(i.last-i.currentSlide+i.cloneOffset)*f:(i.currentSlide+i.cloneOffset)*f,o=l?u.touches[0].pageY:u.touches[0].pageX,s=l?u.touches[0].pageX:u.touches[0].pageY,e.addEventListener("touchmove",t,!1),e.addEventListener("touchend",n,!1))},!1)},resize:function(){!i.animating&&i.is(":visible")&&(d||i.doMath(),u?p.smoothHeight():d?(i.slides.width(i.computedW),i.update(i.pagingCount),i.setProps()):l?(i.viewport.height(i.h),i.setProps(i.h,"setTotal")):(a.smoothHeight&&p.smoothHeight(),i.newSlides.width(i.computedW),i.setProps(i.computedW,"setTotal")))},smoothHeight:function(t){if(!l||u){var e=u?i:i.viewport;t?e.animate({height:i.slides.eq(i.animatingTo).height()},t):e.height(i.slides.eq(i.animatingTo).height())}},sync:function(e){var n=t(a.sync).data("flexslider"),o=i.animatingTo;switch(e){case"animate":n.flexAnimate(o,a.pauseOnAction,!1,!0);break;case"play":!n.playing&&!n.asNav&&n.play();break;case"pause":n.pause()}}},i.flexAnimate=function(e,n,r,h,m){if(f&&1===i.pagingCount&&(i.direction=i.currentItem<e?"next":"prev"),!i.animating&&(i.canAdvance(e,m)||r)&&i.is(":visible")){if(f&&h){if(r=t(a.asNavFor).data("flexslider"),i.atEnd=0===e||e===i.count-1,r.flexAnimate(e,!0,!1,!0,m),i.direction=i.currentItem<e?"next":"prev",r.direction=i.direction,Math.ceil((e+1)/i.visible)-1===i.currentSlide||0===e)return i.currentItem=e,i.slides.removeClass(o+"active-slide").eq(e).addClass(o+"active-slide"),!1;i.currentItem=e,i.slides.removeClass(o+"active-slide").eq(e).addClass(o+"active-slide"),e=Math.floor(e/i.visible)}if(i.animating=!0,i.animatingTo=e,a.before(i),n&&i.pause(),i.syncExists&&!m&&p.sync("animate"),a.controlNav&&p.controlNav.active(),d||i.slides.removeClass(o+"active-slide").eq(e).addClass(o+"active-slide"),i.atEnd=0===e||e===i.last,a.directionNav&&p.directionNav.update(),e===i.last&&(a.end(i),a.animationLoop||i.pause()),u)s?(i.slides.eq(i.currentSlide).css({opacity:0,zIndex:1}),i.slides.eq(e).css({opacity:1,zIndex:2}),i.slides.unbind("webkitTransitionEnd transitionend"),i.slides.eq(i.currentSlide).bind("webkitTransitionEnd transitionend",function(){a.after(i)}),i.animating=!1,i.currentSlide=i.animatingTo):(i.slides.eq(i.currentSlide).fadeOut(a.animationSpeed,a.easing),i.slides.eq(e).fadeIn(a.animationSpeed,a.easing,i.wrapup));else{var v=l?i.slides.filter(":first").height():i.computedW;d?(e=a.itemWidth>i.w?2*a.itemMargin:a.itemMargin,e=(i.itemW+e)*i.move*i.animatingTo,e=e>i.limit&&1!==i.visible?i.limit:e):e=0===i.currentSlide&&e===i.count-1&&a.animationLoop&&"next"!==i.direction?c?(i.count+i.cloneOffset)*v:0:i.currentSlide===i.last&&0===e&&a.animationLoop&&"prev"!==i.direction?c?0:(i.count+1)*v:c?(i.count-1-e+i.cloneOffset)*v:(e+i.cloneOffset)*v,i.setProps(e,"",a.animationSpeed),i.transitions?(a.animationLoop&&i.atEnd||(i.animating=!1,i.currentSlide=i.animatingTo),i.container.unbind("webkitTransitionEnd transitionend"),i.container.bind("webkitTransitionEnd transitionend",function(){i.wrapup(v)
})):i.container.animate(i.args,a.animationSpeed,a.easing,function(){i.wrapup(v)})}a.smoothHeight&&p.smoothHeight(a.animationSpeed)}},i.wrapup=function(t){!u&&!d&&(0===i.currentSlide&&i.animatingTo===i.last&&a.animationLoop?i.setProps(t,"jumpEnd"):i.currentSlide===i.last&&0===i.animatingTo&&a.animationLoop&&i.setProps(t,"jumpStart")),i.animating=!1,i.currentSlide=i.animatingTo,a.after(i)},i.animateSlides=function(){i.animating||i.flexAnimate(i.getTarget("next"))},i.pause=function(){clearInterval(i.animatedSlides),i.playing=!1,a.pausePlay&&p.pausePlay.update("play"),i.syncExists&&p.sync("pause")},i.play=function(){i.animatedSlides=setInterval(i.animateSlides,a.slideshowSpeed),i.playing=!0,a.pausePlay&&p.pausePlay.update("pause"),i.syncExists&&p.sync("play")},i.canAdvance=function(t,e){var n=f?i.pagingCount-1:i.last;return e?!0:f&&i.currentItem===i.count-1&&0===t&&"prev"===i.direction?!0:f&&0===i.currentItem&&t===i.pagingCount-1&&"next"!==i.direction?!1:t!==i.currentSlide||f?a.animationLoop?!0:i.atEnd&&0===i.currentSlide&&t===n&&"next"!==i.direction?!1:i.atEnd&&i.currentSlide===n&&0===t&&"next"===i.direction?!1:!0:!1},i.getTarget=function(t){return i.direction=t,"next"===t?i.currentSlide===i.last?0:i.currentSlide+1:0===i.currentSlide?i.last:i.currentSlide-1},i.setProps=function(t,e,n){var o,s=t?t:(i.itemW+a.itemMargin)*i.move*i.animatingTo;o=-1*function(){if(d)return"setTouch"===e?t:c&&i.animatingTo===i.last?0:c?i.limit-(i.itemW+a.itemMargin)*i.move*i.animatingTo:i.animatingTo===i.last?i.limit:s;switch(e){case"setTotal":return c?(i.count-1-i.currentSlide+i.cloneOffset)*t:(i.currentSlide+i.cloneOffset)*t;case"setTouch":return t;case"jumpEnd":return c?t:i.count*t;case"jumpStart":return c?i.count*t:t;default:return t}}()+"px",i.transitions&&(o=l?"translate3d(0,"+o+",0)":"translate3d("+o+",0,0)",n=void 0!==n?n/1e3+"s":"0s",i.container.css("-"+i.pfx+"-transition-duration",n)),i.args[i.prop]=o,(i.transitions||void 0===n)&&i.container.css(i.args)},i.setup=function(e){if(u)i.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===e&&(s?i.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+a.animationSpeed/1e3+"s ease",zIndex:1}).eq(i.currentSlide).css({opacity:1,zIndex:2}):i.slides.eq(i.currentSlide).fadeIn(a.animationSpeed,a.easing)),a.smoothHeight&&p.smoothHeight();else{var n,r;"init"===e&&(i.viewport=t('<div class="'+o+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(i).append(i.container),i.cloneCount=0,i.cloneOffset=0,c&&(r=t.makeArray(i.slides).reverse(),i.slides=t(r),i.container.empty().append(i.slides))),a.animationLoop&&!d&&(i.cloneCount=2,i.cloneOffset=1,"init"!==e&&i.container.find(".clone").remove(),i.container.append(i.slides.first().clone().addClass("clone")).prepend(i.slides.last().clone().addClass("clone"))),i.newSlides=t(a.selector,i),n=c?i.count-1-i.currentSlide+i.cloneOffset:i.currentSlide+i.cloneOffset,l&&!d?(i.container.height(200*(i.count+i.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){i.newSlides.css({display:"block"}),i.doMath(),i.viewport.height(i.h),i.setProps(n*i.h,"init")},"init"===e?100:0)):(i.container.width(200*(i.count+i.cloneCount)+"%"),i.setProps(n*i.computedW,"init"),setTimeout(function(){i.doMath(),i.newSlides.css({width:i.computedW,"float":"left",display:"block"}),a.smoothHeight&&p.smoothHeight()},"init"===e?100:0))}d||i.slides.removeClass(o+"active-slide").eq(i.currentSlide).addClass(o+"active-slide")},i.doMath=function(){var t=i.slides.first(),e=a.itemMargin,n=a.minItems,o=a.maxItems;i.w=i.width(),i.h=t.height(),i.boxPadding=t.outerWidth()-t.width(),d?(i.itemT=a.itemWidth+e,i.minW=n?n*i.itemT:i.w,i.maxW=o?o*i.itemT:i.w,i.itemW=i.minW>i.w?(i.w-e*n)/n:i.maxW<i.w?(i.w-e*o)/o:a.itemWidth>i.w?i.w:a.itemWidth,i.visible=Math.floor(i.w/(i.itemW+e)),i.move=0<a.move&&a.move<i.visible?a.move:i.visible,i.pagingCount=Math.ceil((i.count-i.visible)/i.move+1),i.last=i.pagingCount-1,i.limit=1===i.pagingCount?0:a.itemWidth>i.w?(i.itemW+2*e)*i.count-i.w-e:(i.itemW+e)*i.count-i.w-e):(i.itemW=i.w,i.pagingCount=i.count,i.last=i.count-1),i.computedW=i.itemW-i.boxPadding},i.update=function(t,e){i.doMath(),d||(t<i.currentSlide?i.currentSlide+=1:t<=i.currentSlide&&0!==t&&(i.currentSlide-=1),i.animatingTo=i.currentSlide),a.controlNav&&!i.manualControls&&("add"===e&&!d||i.pagingCount>i.controlNav.length?p.controlNav.update("add"):("remove"===e&&!d||i.pagingCount<i.controlNav.length)&&(d&&i.currentSlide>i.last&&(i.currentSlide-=1,i.animatingTo-=1),p.controlNav.update("remove",i.last))),a.directionNav&&p.directionNav.update()},i.addSlide=function(e,n){var o=t(e);i.count+=1,i.last=i.count-1,l&&c?void 0!==n?i.slides.eq(i.count-n).after(o):i.container.prepend(o):void 0!==n?i.slides.eq(n).before(o):i.container.append(o),i.update(n,"add"),i.slides=t(a.selector+":not(.clone)",i),i.setup(),a.added(i)},i.removeSlide=function(e){var n=isNaN(e)?i.slides.index(t(e)):e;i.count-=1,i.last=i.count-1,isNaN(e)?t(e,i.slides).remove():l&&c?i.slides.eq(i.last).remove():i.slides.eq(e).remove(),i.doMath(),i.update(n,"remove"),i.slides=t(a.selector+":not(.clone)",i),i.setup(),a.removed(i)},p.init()},t.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,pauseOnAction:!0,pauseOnHover:!1,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}},t.fn.flexslider=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){var n=t(this),i=n.find(e.selector?e.selector:".slides > li");1===i.length?(i.fadeIn(400),e.start&&e.start(n)):void 0==n.data("flexslider")&&new t.flexslider(this,e)});var n=t(this).data("flexslider");switch(e){case"play":n.play();break;case"pause":n.pause();break;case"next":n.flexAnimate(n.getTarget("next"),!0);break;case"prev":case"previous":n.flexAnimate(n.getTarget("prev"),!0);break;default:"number"==typeof e&&n.flexAnimate(e,!0)}}}(jQuery),function(t){t.fn.mobileMenu=function(e){var n={defaultText:"Navigate to...",className:"select-menu",subMenuClass:"sub-menu",subMenuDash:"–"},i=t.extend(n,e),a=t(this).find("ul");return a.find("ul").addClass(i.subMenuClass),t("<select />",{"class":i.className}).insertAfter(t("#nav-right")),t("<option />",{value:"#",text:i.defaultText}).appendTo("."+i.className),a.find("a").each(function(){var e=t(this),n=" "+e.text(),a=e.parents("."+i.subMenuClass),o=a.length,s;e.parents("ul").hasClass(i.subMenuClass)&&(s=Array(o+1).join(i.subMenuDash),n=s+n),t("<option />",{value:this.href,html:n,selected:this.href==window.location.href}).appendTo("."+i.className)}),t("."+i.className).change(function(){var e=t(this).val();"#"!==e&&void 0!==typeof e&&(window.location.href=t(this).val())}),t("."+i.className).val(i.defaultText).attr("selected","selected"),this}}(jQuery),function(t){"use strict";t.fn.extend({customSelect:function(e){var n={customClass:null,mapClass:!0,mapStyle:!0},i=function(t,e){var n=t.find(":selected"),i=e.children(":first"),a=n.html()||" ";i.html(a),setTimeout(function(){e.removeClass("customSelectOpen")},60)};return"undefined"==typeof document.body.style.maxHeight?this:(e=t.extend(n,e),this.each(function(){var n=t(this),a=t('<span class="customSelectInner" />'),o=t('<span class="customSelect" />');o.append(a),n.after(o),e.customClass&&o.addClass(e.customClass),e.mapClass&&o.addClass(n.attr("class")),e.mapStyle&&o.attr("style",n.attr("style")),n.addClass("hasCustomSelect").on("update",function(){i(n,o);var t=parseInt(n.outerWidth(),10)-(parseInt(o.outerWidth(),10)-parseInt(o.width(),10));o.css({display:"inline-block"});var e=o.outerHeight();n.attr("disabled")?o.addClass("customSelectDisabled"):o.removeClass("customSelectDisabled"),a.css({width:t,display:"inline-block"}),n.css({"-webkit-appearance":"menulist-button",width:o.outerWidth(),position:"absolute",opacity:0,height:e,fontSize:o.css("font-size")})}).on("change",function(){o.addClass("customSelectChanged"),i(n,o)}).on("keyup",function(){n.blur(),n.focus()}).on("mousedown",function(){o.removeClass("customSelectChanged").addClass("customSelectOpen")}).focus(function(){o.removeClass("customSelectChanged").addClass("customSelectFocus")}).blur(function(){o.removeClass("customSelectFocus customSelectOpen")}).hover(function(){o.addClass("customSelectHover")},function(){o.removeClass("customSelectHover")}).trigger("update")}))}})}(jQuery),function(t,e,n,i){function a(e,n){this.element=e,this.options=t.extend({},s,n),this._defaults=s,this._name=o,this.init()}var o="stellar",s={scrollProperty:"scroll",positionProperty:"position",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(t){t.hide()},showElement:function(t){t.show()}},r={scroll:{getLeft:function(t){return t.scrollLeft()},setLeft:function(t,e){t.scrollLeft(e)},getTop:function(t){return t.scrollTop()},setTop:function(t,e){t.scrollTop(e)}},position:{getLeft:function(t){return-1*parseInt(t.css("left"),10)},getTop:function(t){return-1*parseInt(t.css("top"),10)}},margin:{getLeft:function(t){return-1*parseInt(t.css("margin-left"),10)},getTop:function(t){return-1*parseInt(t.css("margin-top"),10)}},transform:{getLeft:function(t){var e=getComputedStyle(t[0])[d];return"none"!==e?-1*parseInt(e.match(/(-?[0-9]+)/g)[4],10):0},getTop:function(t){var e=getComputedStyle(t[0])[d];return"none"!==e?-1*parseInt(e.match(/(-?[0-9]+)/g)[5],10):0}}},l={position:{setLeft:function(t,e){t.css("left",e)},setTop:function(t,e){t.css("top",e)}},transform:{setPosition:function(t,e,n,i,a){t[0].style[d]="translate3d("+(e-n)+"px, "+(i-a)+"px, 0)"}}},c=function(){var e=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,n=t("script")[0].style,i="",a;for(a in n)if(e.test(a)){i=a.match(e)[0];break}return"WebkitOpacity"in n&&(i="Webkit"),"KhtmlOpacity"in n&&(i="Khtml"),function(t){return i+(i.length>0?t.charAt(0).toUpperCase()+t.slice(1):t)}}(),d=c("transform"),u=t("<div />",{style:"background:#fff"}).css("background-position-x")!==i,f=u?function(t,e,n){t.css({"background-position-x":e,"background-position-y":n})}:function(t,e,n){t.css("background-position",e+" "+n)},p=u?function(t){return[t.css("background-position-x"),t.css("background-position-y")]}:function(t){return t.css("background-position").split(" ")},h=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};a.prototype={init:function(){this.options.name=o+"_"+Math.floor(1e9*Math.random()),this._defineElements(),this._defineGetters(),this._defineSetters(),this._handleWindowLoadAndResize(),this._detectViewport(),this.refresh({firstLoad:!0}),"scroll"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===n.body&&(this.element=e),this.$scrollElement=t(this.element),this.$element=this.element===e?t("body"):this.$scrollElement,this.$viewportElement=this.options.viewportElement!==i?t(this.options.viewportElement):this.$scrollElement[0]===e||"scroll"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var t=this,e=r[t.options.scrollProperty];this._getScrollLeft=function(){return e.getLeft(t.$scrollElement)},this._getScrollTop=function(){return e.getTop(t.$scrollElement)}},_defineSetters:function(){var e=this,n=r[e.options.scrollProperty],i=l[e.options.positionProperty],a=n.setLeft,o=n.setTop;this._setScrollLeft="function"==typeof a?function(t){a(e.$scrollElement,t)}:t.noop,this._setScrollTop="function"==typeof o?function(t){o(e.$scrollElement,t)}:t.noop,this._setPosition=i.setPosition||function(t,n,a,o,s){e.options.horizontalScrolling&&i.setLeft(t,n,a),e.options.verticalScrolling&&i.setTop(t,o,s)}},_handleWindowLoadAndResize:function(){var n=this,i=t(e);n.options.responsive&&i.bind("load."+this.name,function(){n.refresh()}),i.bind("resize."+this.name,function(){n._detectViewport(),n.options.responsive&&n.refresh()})},refresh:function(n){var i=this,a=i._getScrollLeft(),o=i._getScrollTop();(!n||!n.firstLoad)&&this._reset(),this._setScrollLeft(0),this._setScrollTop(0),this._setOffsets(),this._findParticles(),this._findBackgrounds(),n&&n.firstLoad&&/WebKit/.test(navigator.userAgent)&&t(e).load(function(){var t=i._getScrollLeft(),e=i._getScrollTop();i._setScrollLeft(t+1),i._setScrollTop(e+1),i._setScrollLeft(t),i._setScrollTop(e)}),this._setScrollLeft(a),this._setScrollTop(o)},_detectViewport:function(){var t=this.$viewportElement.offset(),e=null!==t&&t!==i;this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.viewportOffsetTop=e?t.top:0,this.viewportOffsetLeft=e?t.left:0},_findParticles:function(){var e=this,n=this._getScrollLeft(),a=this._getScrollTop();if(this.particles!==i)for(var o=this.particles.length-1;o>=0;o--)this.particles[o].$element.data("stellar-elementIsActive",i);this.particles=[],this.options.parallaxElements&&this.$element.find("[data-stellar-ratio]").each(function(n){var a=t(this),o,s,r,l,c,d,u,f,p,h=0,m=0,v=0,g=0;if(a.data("stellar-elementIsActive")){if(a.data("stellar-elementIsActive")!==this)return}else a.data("stellar-elementIsActive",this);e.options.showElement(a),a.data("stellar-startingLeft")?(a.css("left",a.data("stellar-startingLeft")),a.css("top",a.data("stellar-startingTop"))):(a.data("stellar-startingLeft",a.css("left")),a.data("stellar-startingTop",a.css("top"))),r=a.position().left,l=a.position().top,c="auto"===a.css("margin-left")?0:parseInt(a.css("margin-left"),10),d="auto"===a.css("margin-top")?0:parseInt(a.css("margin-top"),10),f=a.offset().left-c,p=a.offset().top-d,a.parents().each(function(){var e=t(this);return e.data("stellar-offset-parent")===!0?(h=v,m=g,u=e,!1):(v+=e.position().left,void(g+=e.position().top))}),o=a.data("stellar-horizontal-offset")!==i?a.data("stellar-horizontal-offset"):u!==i&&u.data("stellar-horizontal-offset")!==i?u.data("stellar-horizontal-offset"):e.horizontalOffset,s=a.data("stellar-vertical-offset")!==i?a.data("stellar-vertical-offset"):u!==i&&u.data("stellar-vertical-offset")!==i?u.data("stellar-vertical-offset"):e.verticalOffset,e.particles.push({$element:a,$offsetParent:u,isFixed:"fixed"===a.css("position"),horizontalOffset:o,verticalOffset:s,startingPositionLeft:r,startingPositionTop:l,startingOffsetLeft:f,startingOffsetTop:p,parentOffsetLeft:h,parentOffsetTop:m,stellarRatio:a.data("stellar-ratio")!==i?a.data("stellar-ratio"):1,width:a.outerWidth(!0),height:a.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var e=this,n=this._getScrollLeft(),a=this._getScrollTop(),o;this.backgrounds=[],this.options.parallaxBackgrounds&&(o=this.$element.find("[data-stellar-background-ratio]"),this.$element.data("stellar-background-ratio")&&(o=o.add(this.$element)),o.each(function(){var o=t(this),s=p(o),r,l,c,d,u,h,m,v,g,w=0,y=0,b=0,x=0;if(o.data("stellar-backgroundIsActive")){if(o.data("stellar-backgroundIsActive")!==this)return}else o.data("stellar-backgroundIsActive",this);o.data("stellar-backgroundStartingLeft")?f(o,o.data("stellar-backgroundStartingLeft"),o.data("stellar-backgroundStartingTop")):(o.data("stellar-backgroundStartingLeft",s[0]),o.data("stellar-backgroundStartingTop",s[1])),u="auto"===o.css("margin-left")?0:parseInt(o.css("margin-left"),10),h="auto"===o.css("margin-top")?0:parseInt(o.css("margin-top"),10),m=o.offset().left-u-n,v=o.offset().top-h-a,o.parents().each(function(){var e=t(this);return e.data("stellar-offset-parent")===!0?(w=b,y=x,g=e,!1):(b+=e.position().left,void(x+=e.position().top))}),r=o.data("stellar-horizontal-offset")!==i?o.data("stellar-horizontal-offset"):g!==i&&g.data("stellar-horizontal-offset")!==i?g.data("stellar-horizontal-offset"):e.horizontalOffset,l=o.data("stellar-vertical-offset")!==i?o.data("stellar-vertical-offset"):g!==i&&g.data("stellar-vertical-offset")!==i?g.data("stellar-vertical-offset"):e.verticalOffset,e.backgrounds.push({$element:o,$offsetParent:g,isFixed:"fixed"===o.css("background-attachment"),horizontalOffset:r,verticalOffset:l,startingValueLeft:s[0],startingValueTop:s[1],startingBackgroundPositionLeft:isNaN(parseInt(s[0],10))?0:parseInt(s[0],10),startingBackgroundPositionTop:isNaN(parseInt(s[1],10))?0:parseInt(s[1],10),startingPositionLeft:o.position().left,startingPositionTop:o.position().top,startingOffsetLeft:m,startingOffsetTop:v,parentOffsetLeft:w,parentOffsetTop:y,stellarRatio:o.data("stellar-background-ratio")===i?1:o.data("stellar-background-ratio")})}))},_reset:function(){var t,e,n,i,a;for(a=this.particles.length-1;a>=0;a--)t=this.particles[a],e=t.$element.data("stellar-startingLeft"),n=t.$element.data("stellar-startingTop"),this._setPosition(t.$element,e,e,n,n),this.options.showElement(t.$element),t.$element.data("stellar-startingLeft",null).data("stellar-elementIsActive",null).data("stellar-backgroundIsActive",null);for(a=this.backgrounds.length-1;a>=0;a--)i=this.backgrounds[a],i.$element.data("stellar-backgroundStartingLeft",null).data("stellar-backgroundStartingTop",null),f(i.$element,i.startingValueLeft,i.startingValueTop)},destroy:function(){this._reset(),this.$scrollElement.unbind("resize."+this.name).unbind("scroll."+this.name),this._animationLoop=t.noop,t(e).unbind("load."+this.name).unbind("resize."+this.name)},_setOffsets:function(){var n=this,i=t(e);i.unbind("resize.horizontal-"+this.name).unbind("resize.vertical-"+this.name),"function"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(),i.bind("resize.horizontal-"+this.name,function(){n.horizontalOffset=n.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset,"function"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(),i.bind("resize.vertical-"+this.name,function(){n.verticalOffset=n.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var t=this._getScrollLeft(),e=this._getScrollTop(),n,i,a,o,s,r,l,c=!0,d=!0,u,p,h,m,v;if(this.currentScrollLeft!==t||this.currentScrollTop!==e||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=t,this.currentScrollTop=e,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,v=this.particles.length-1;v>=0;v--)a=this.particles[v],o=a.isFixed?1:0,this.options.horizontalScrolling?(u=(t+a.horizontalOffset+this.viewportOffsetLeft+a.startingPositionLeft-a.startingOffsetLeft+a.parentOffsetLeft)*-(a.stellarRatio+o-1)+a.startingPositionLeft,h=u-a.startingPositionLeft+a.startingOffsetLeft):(u=a.startingPositionLeft,h=a.startingOffsetLeft),this.options.verticalScrolling?(p=(e+a.verticalOffset+this.viewportOffsetTop+a.startingPositionTop-a.startingOffsetTop+a.parentOffsetTop)*-(a.stellarRatio+o-1)+a.startingPositionTop,m=p-a.startingPositionTop+a.startingOffsetTop):(p=a.startingPositionTop,m=a.startingOffsetTop),this.options.hideDistantElements&&(d=!this.options.horizontalScrolling||h+a.width>(a.isFixed?0:t)&&h<(a.isFixed?0:t)+this.viewportWidth+this.viewportOffsetLeft,c=!this.options.verticalScrolling||m+a.height>(a.isFixed?0:e)&&m<(a.isFixed?0:e)+this.viewportHeight+this.viewportOffsetTop),d&&c?(a.isHidden&&(this.options.showElement(a.$element),a.isHidden=!1),this._setPosition(a.$element,u,a.startingPositionLeft,p,a.startingPositionTop)):a.isHidden||(this.options.hideElement(a.$element),a.isHidden=!0);for(v=this.backgrounds.length-1;v>=0;v--)s=this.backgrounds[v],o=s.isFixed?0:1,r=this.options.horizontalScrolling?(t+s.horizontalOffset-this.viewportOffsetLeft-s.startingOffsetLeft+s.parentOffsetLeft-s.startingBackgroundPositionLeft)*(o-s.stellarRatio)+"px":s.startingValueLeft,l=this.options.verticalScrolling?(e+s.verticalOffset-this.viewportOffsetTop-s.startingOffsetTop+s.parentOffsetTop-s.startingBackgroundPositionTop)*(o-s.stellarRatio)+"px":s.startingValueTop,f(s.$element,r,l)}},_handleScrollEvent:function(){var t=this,e=!1,n=function(){t._repositionElements(),e=!1},i=function(){e||(h(n),e=!0)};this.$scrollElement.bind("scroll."+this.name,i),i()},_startAnimationLoop:function(){var t=this;this._animationLoop=function(){h(t._animationLoop),t._repositionElements()},this._animationLoop()}},t.fn[o]=function(e){var n=arguments;return e===i||"object"==typeof e?this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new a(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var i=t.data(this,"plugin_"+o);i instanceof a&&"function"==typeof i[e]&&i[e].apply(i,Array.prototype.slice.call(n,1)),"destroy"===e&&t.data(this,"plugin_"+o,null)}):void 0},t[o]=function(n){var i=t(e);return i.stellar.apply(i,Array.prototype.slice.call(arguments,0))},t[o].scrollProperty=r,t[o].positionProperty=l,e.Stellar=a}(jQuery,this,document),function(t){function e(){var e,n,i={height:l.innerHeight,width:l.innerWidth};return i.height||(e=r.compatMode,(e||!t.support.boxModel)&&(n="CSS1Compat"===e?c:r.body,i={height:n.clientHeight,width:n.clientWidth})),i}function n(){return{top:l.pageYOffset||c.scrollTop||r.body.scrollTop,left:l.pageXOffset||c.scrollLeft||r.body.scrollLeft}}function i(){var i=t(),r,l=0;if(t.each(a,function(t,e){var n=e.data.selector,a=e.$element;i=i.add(n?a.find(n):a)}),r=i.length)for(o=o||e(),s=s||n();r>l;l++)if(t.contains(c,i[l])){var d=t(i[l]),u={height:d.height(),width:d.width()},f=d.offset(),p=d.data("inview"),h,m,v;if(!s||!o)return;f.top+u.height>s.top&&f.top<s.top+o.height&&f.left+u.width>s.left&&f.left<s.left+o.width?(h=s.left>f.left?"right":s.left+o.width<f.left+u.width?"left":"both",m=s.top>f.top?"bottom":s.top+o.height<f.top+u.height?"top":"both",v=h+"-"+m,p&&p===v||d.data("inview",v).trigger("inview",[!0,h,m])):p&&d.data("inview",!1).trigger("inview",[!1])}}var a={},o,s,r=document,l=window,c=r.documentElement,d=t.expando;t.event.special.inview={add:function(e){a[e.guid+"-"+this[d]]={data:e,$element:t(this)}},remove:function(t){try{delete a[t.guid+"-"+this[d]]}catch(e){}}},t(l).bind("scroll resize",function(){o=s=null}),!c.addEventListener&&c.attachEvent&&c.attachEvent("onfocusin",function(){s=null}),setInterval(i,250)}(jQuery),$(document).ready(function(){function t(t,e,n){$slideTo=$(n?n:'.panel[data-slide="'+t+'"]'),$("html,body").stop().animate({scrollTop:$slideTo.offset().top-60},2e3,"easeInOutQuint")}function e(){$(window).width()<1700?$("#grapes, #grape, #wine-glass").fadeOut(function(){$(this).css("z-index","-500")}):$("#grapes, #grape, #wine-glass").fadeIn().css("z-index","10")}function n(t,e){if(e||$("#locations-select").val(t),-1==t)S.fitBounds(O),t=0;else{var n=new google.maps.LatLng(d[t][1],d[t][2]);S.panTo(n),S.setZoom(12),t++}$("#locations-info > div:eq("+t+")").is(":hidden")&&$("#locations-info > div:visible").fadeOut(500,function(){$("#locations-info > div:eq("+t+")").fadeIn(500)})}function i(){var t={zoom:15,scrollwheel:!1,center:new google.maps.LatLng(u[1],u[2]),mapTypeId:google.maps.MapTypeId.ROADMAP};E=new google.maps.Map(document.getElementById("contact-map"),t)}function a(t){var e=!1,n=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,i=t;return n.test(i)&&""!=i?!0:!1}function o(t,e){if(!e)var e="error";$("#contact-form img.loading").fadeOut(1e3).remove(),$("#contact-form #response").hide().html('<span class="'+e+'">'+t+"</span>").fadeIn("slow")}function s(t,e){if(!e)var e="error";$("#functions-contact-form img.loading").fadeOut(1e3).remove(),$("#functions-contact-form #functionsResponse").hide().html('<span class="'+e+'">'+t+"</span>").fadeIn("slow")}function r(){return $.getJSON("/libs/facebook-albums.php",function(t){t&&l(t)}).error(function(){alert("There was an error")}),!1}function l(t){for(var e=t.length>9?9:t.length,n=0;e>n;n++){var i=t[n],a=$("#facebookAlbums").find(".template"),o=$(a).clone();o.removeAttr("style"),o.removeClass("template"),o.attr("album-id",i.id),o.find("a").attr("href",i.link),o.find(".thumb-bg").css("background-image","url("+i.cover+")"),o.find("figcaption div").text(i.name),$("#facebookAlbums .thumbnails").append(o)}}var c=$("#metahost").attr("content"),d=[["Salem, MA",42.520217,-70.892642]],u=d[0],f=!1,p="Please enter a valid email address",h="Please enter your name",m="Please enter your comment",v="Please enter your phone number",g="Please enter a guest count",w="Please enter an event date",y="Please enter a start time",b="Please enter an event type",x=!1;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|ZuneWP7/i.test(navigator.userAgent)&&(x=!0,$("html").addClass("mobile")),!x){$(window).stellar();var C=!1;$(".panel").bind("inview",function(t,e,n,i){dataslide=$(this).attr("data-slide"),e?("both"==i?($("#top li").not('[data-slide="'+dataslide+'"]').removeClass("active"),$('#top li[data-slide="'+dataslide+'"]').addClass("active")):"top"==i&&"both"!=C&&($("#top li").not('[data-slide="'+dataslide+'"]').removeClass("active"),$('#top li[data-slide="'+dataslide+'"]').addClass("active")),C=i):$('#top li[data-slide="'+dataslide+'"]').removeClass("active")})}$("#top").find("li, #logo > div").click(function(e){dataslide=$(this).attr("data-slide"),t(dataslide,!0)}),$(".to-top").click(function(e){e.preventDefault(),t(!1,!0,$(this).attr("href"))}),$(function(){$("a[rel*=external], .social a").click(function(){return window.open(this.href),!1})}),$("#top").mobileMenu(),$(".select-menu").customSelect(),$("#front").flexslider({animation:"slide",controlNav:!1}),x||(e(),$(window).resize(function(){e()})),$("#top a").click(function(t){t.preventDefault(),$("#top li a").removeClass("active"),$(this).addClass("active")}),$("a[href^='#']").click(function(t){t.preventDefault()}),$(".social li a").hover(function(){var t=this;$(t).stop().animate({marginTop:"-8px",paddingBottom:"8px",opacity:1},250,function(){$(t).animate({marginTop:"-4px",paddingBottom:"4px"},250)})},function(){var t=this;$(t).stop().animate({marginTop:"0px",paddingBottom:"0px",opacity:.9},250,function(){$(t).animate({marginTop:"0px",paddingBottom:"0px"},250)})}),$("#albumPhotos .thumbnail").colorbox({rel:"gal",current:"",maxWidth:"85%",maxHeight:"85%",scrolling:!1,opacity:.5,title:function(){return $(this).find("figcaption > div").html()}});var S,T=[],O=new google.maps.LatLngBounds,L=new google.maps.MarkerImage("img/marker.png",new google.maps.Size(38,55),new google.maps.Point(0,0),new google.maps.Point(0,55)),M=new google.maps.MarkerImage("img/marker-shadow.png",new google.maps.Size(70,55),new google.maps.Point(0,0),new google.maps.Point(0,55)),k={coord:[25,0,27,1,29,2,31,3,32,4,33,5,34,6,34,7,35,8,36,9,36,10,37,11,37,12,37,13,37,14,37,15,37,16,37,17,37,18,37,19,37,20,37,21,37,22,37,23,36,24,36,25,35,26,35,27,34,28,34,29,33,30,32,31,32,32,31,33,30,34,30,35,29,36,28,37,28,38,27,39,26,40,26,41,25,42,24,43,24,44,23,45,23,46,22,47,22,48,21,49,21,50,20,51,20,52,20,53,19,54,18,54,18,53,17,52,17,51,16,50,16,49,16,48,15,47,15,46,14,45,13,44,13,43,12,42,12,41,11,40,10,39,10,38,9,37,8,36,8,35,7,34,6,33,6,32,5,31,4,30,4,29,3,28,3,27,2,26,1,25,1,24,1,23,0,22,0,21,0,20,0,19,0,18,0,17,0,16,0,15,0,14,0,13,0,12,1,11,1,10,1,9,2,8,3,7,3,6,4,5,5,4,7,3,8,2,10,1,12,0,25,0],type:"poly"};f||$("#locations-select").append('<option value="-1">-- Choose a location --</option>');for(var P=d.length,I=null,N=0;P>N;N++)I=d[N],$("#locations-select").append("<option value='"+N+"'>"+I[0]+"</option>");$("#locations-select").change(function(){var t=$(this).val();n(t,!0)}),$("#btnShowFunctionsContact").bind("click",function(){$("#privteFunctionsFormWraper").is(":visible")?($("#privteFunctionsFormWraper").fadeOut(),$("#btnShowFunctionsContact").text("Contact")):($("#privteFunctionsFormWraper").fadeIn(),$("#btnShowFunctionsContact").text("Close"))}),f&&n(0,!0);var E;i();var _=new google.maps.Marker({raiseOnDrag:!1,icon:L,shadow:M,shape:k,map:E,position:E.getCenter()});_.info=new google.maps.InfoWindow({content:'<div class="contact-infobox">'+$("#contact address").html()+"</div>"}),google.maps.event.addListener(_,"click",function(){_.info.open(E,_)}),google.maps.event.addListener(_,"closeclick",function(){_.close()}),$("#contact-form button").click(function(t){t.preventDefault(),$("#contact-form #response").hide(),$(this).parent().append('<img src="assets/images/loading.gif" class="loading" alt="Loading..." />');var e=$("#contact-form #inputName").val(),n=$("#contact-form #inputEmail").val(),i=$("#contact-form #textMessage").val();return""==e?(o(h),!1):a(n)?""==i?(o(m),!1):($.ajax({type:"post",url:"libs/mail.php",data:"name="+e+"&email="+n+"&comments="+i,success:function(t){o(t,"success"),$("#contact-form #inputName").val(""),$("#contact-form #inputEmail").val(""),$("#contact-form #textMessage").val("")},error:function(t){o(t)}}),!1):(o(p),!1)}),$("#functions-contact-form button").click(function(t){t.preventDefault(),$("#functions-contact-form #response").hide(),$(this).parent().append('<img src="assets/images/loading.gif" class="loading" alt="Loading..." />');var e=$("#functions-contact-form #functionsInputName").val(),n=$("#functions-contact-form #functionsInputEmail").val(),i=$("#functions-contact-form #functionsTextMessage").val(),o=$("#functions-contact-form #functionsInputPhone").val(),r=$("#functions-contact-form #functionsGuestCount").val(),l=$("#functions-contact-form #functionsEventDate").val(),c=$("#functions-contact-form #eventTimeHour").val()+":"+$("#functions-contact-form #eventTimeMinute").val()+$("#functions-contact-form input:radio[name=eventTimeAmPm]:checked").val(),d=$("#functions-contact-form input:radio[name=eventMenu]:checked").val(),u=$("#functions-contact-form #functionsEventType").val();return""==e?(s(h),!1):a(n)?""==o?(s(v),!1):""==r?(s(v),!1):l&&""!=l?""==c?(s(y),!1):""==c?(s(y),!1):""==u?(s(b),!1):($.ajax({type:"post",url:"libs/mail-functions.php",data:"name="+e+"&email="+n+"&phone="+o+"&guestCount="+r+"&date="+l+"&startTime="+c+"&menu="+d+"&comments="+i+"&eventType="+u,success:function(t){s(t,"success"),$("#functions-contact-form input").val("")},error:function(t){s(t)}}),!1):(s(w),!1):(s(p),!1)}),$("#mailing-list button").click(function(t){return a($("#mailing-list #email").val())?($("#mailing-list #response-newsletter").fadeOut(),!0):(t.preventDefault(),$("#mailing-list #response-newsletter").hide().html('<span class="error">'+p+"</span>").fadeIn("slow"),!1)}),$("#show").css({"margin-left":"-200px"}),$("#hide, #show").click(function(){$("#switch").is(":visible")?($("#switch").animate({"margin-left":"-200px"},1e3,function(){$(this).hide()}),$("#show").animate({"margin-left":"0px"},1e3).show()):($("#show").animate({"margin-left":"-200px"},1e3,function(){$(this).hide()}),$("#switch").show().animate({"margin-left":"0"},1e3))}),r()});